import{c as ae,j as e,b as G,P as ie,B as r,T as m,r as y,C as me,G as K,Q as ke,S as ve,U as Ce,V as ce,W as R,X as ye,R as Ae,d as te,a as Se}from"./index-BGTAQW_U.js";import{R as we}from"./RocketLaunch-D25qINgS.js";import{X as D,Y as b,ad as Q,ae as Te,Q as Me,af as Ie,F as Ee,I as De,S as Be,M as H,ag as Ne,u as ne,a as le,i as $,T as Z,c as J,g as V,U as Fe,ah as he,ai as re,_ as Le,j as Ue,a0 as de,aj as oe,t as Pe,s as ze}from"./PageFragment-DjORsYcd.js";import{m as $e}from"./metamask-o2Am2NjE.js";import{C as ue}from"./Chip-BVtiX9HH.js";import{T as xe}from"./Tooltip-DdW1X8Tn.js";import{C as _e}from"./Card-D10D0lM2.js";import{C as We}from"./CardContent-DweNg2ie.js";import{A as Re}from"./AttachMoney-Dt_dxtrV.js";import{L as He}from"./LocalGasStation-DI7-NKTA.js";import{E as ee}from"./EmojiEvents-BkHMTEkx.js";import{g as pe}from"./EcosystemDropdown-6vfdunWq.js";import{M as Je}from"./MoreVert-C92zqg03.js";import{F as Oe}from"./FooterFragment-uVsJ-McG.js";import"./CenteredLoading-D6gqgPgh.js";import"./Popper-RQnUOMuW.js";import"./ExploreLiquidityPools-BGpa2AwW.js";const qe=ae(e.jsx("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"})),Ye=ae(e.jsx("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2z"})),Xe=ae(e.jsx("path",{d:"M11 6H9V4h2zm4-2h-2v2h2zM9 14h2v-2H9zm10-4V8h-2v2zm0 4v-2h-2v2zm-6 0h2v-2h-2zm6-10h-2v2h2zm-6 4V6h-2v2zm-6 2V8h2V6H7V4H5v16h2v-8h2v-2zm8 2h2v-2h-2zm-4-2v2h2v-2zM9 8v2h2V8zm4 2h2V8h-2zm2-4v2h2V6z"})),ge=({chartData:t,maxValue:s,totalTransactions:A,chartTitle:j,averageValue:h,hideTotalTransactions:p})=>{const l=G();return e.jsxs(ie,{sx:{p:3,mb:3,bgcolor:"background.paper"},children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(m,{variant:"h6",children:j}),e.jsxs(r,{display:"flex",gap:1,children:[h!==void 0&&e.jsx(ue,{label:`Avg: $${h.toFixed(4)}`,size:"small",variant:"outlined",sx:{borderColor:l.palette.info.main,color:l.palette.info.main}}),!p&&e.jsx(ue,{label:`${A} Transactions`,color:"secondary",variant:"outlined",size:"small"})]})]}),e.jsx(r,{sx:{overflowX:"auto",pb:1},children:e.jsxs(r,{height:200,display:"flex",alignItems:"stretch",sx:{pt:2,position:"relative",minWidth:Math.max(100,t.length*10)},children:[h!==void 0&&s>0&&e.jsx(r,{sx:{position:"absolute",left:0,right:0,bottom:`${h/s*100}%`,borderTop:`2px dashed ${l.palette.info.main}`,opacity:.7,zIndex:1,pointerEvents:"none"}}),t.map(c=>{const C=s>0?c.value/s*100:0,T=h!==void 0&&c.value>h;return e.jsx(xe,{title:e.jsxs(r,{textAlign:"center",children:[e.jsx(m,{variant:"body2",fontWeight:"bold",children:c.time}),c.formattedValue&&e.jsx(m,{variant:"body2",color:"warning.main",fontWeight:"bold",children:c.formattedValue}),c.tooltipItems?.map((x,S)=>e.jsxs(m,{variant:x.variant||"caption",display:"block",color:x.color||"text.secondary",fontWeight:x.fontWeight||"normal",children:[x.label?`${x.label}: `:"",x.value]},S))]}),arrow:!0,children:e.jsx(r,{sx:{flex:1,display:"flex",alignItems:"flex-end",px:.25,"&:hover .bar":{opacity:.7,transform:"scaleY(1.05)"}},children:e.jsx(r,{className:"bar",sx:{height:`${Math.max(C,2)}%`,width:"100%",bgcolor:T?l.palette.success.light:l.palette.warning.main,borderRadius:"4px 4px 0 0",transition:"all 0.3s ease",opacity:.5}})})},c.id||c.timestamp)})]})}),e.jsxs(r,{display:"flex",justifyContent:"space-between",mt:1,children:[e.jsx(m,{variant:"caption",color:"textSecondary",children:t.length>0?t[0].time:""}),e.jsx(m,{variant:"caption",color:"textSecondary",children:t.length>0?t[t.length-1].time:""})]})]})},Ze=({logs:t,balances:s,truncateAddress:A})=>{const{chartData:j,maxBurnedUSD:h,totalTransactions:p,averageBurnedUSD:l}=y.useMemo(()=>{let c=0;const C=t.slice(0,500),T={};C.forEach(o=>{T[o.blockNumber]||(T[o.blockNumber]={id:o.id,timestamp:o.timestamp,burnedBigInt:0n,jackpotBigInt:0n,tipBigInt:0n,callers:new Set,txCount:0});const n=T[o.blockNumber];n.burnedBigInt=n.burnedBigInt+o.args.amountActuallyBurned,n.jackpotBigInt=n.jackpotBigInt+o.args.jackpotAmount,n.tipBigInt=n.tipBigInt+o.args.totalTipAmount,n.callers.add(o.args.caller),n.txCount+=1});const x=Object.entries(T).map(([o,n])=>{let v=0,f=0,B="$0.00",I;if(s){const L=D({value:n.burnedBigInt,inputToken:b.Mintable,outputToken:b.USDC,balances:s,round:4,removeCommas:!0});v=parseFloat(L);const _=D({value:n.jackpotBigInt,inputToken:b.Mintable,outputToken:b.USDC,balances:s,round:4,removeCommas:!0});f=parseFloat(_),B=D({value:n.jackpotBigInt,inputToken:b.Mintable,outputToken:b.USDC,balances:s,round:4}),n.tipBigInt!==0n&&(I=D({value:n.tipBigInt,inputToken:b.Mintable,outputToken:b.USDC,balances:s,round:4}))}f>c&&(c=f);const k=Array.from(n.callers),g=k.length>1?"Multiple Callers":k.length>0?A(k[0]):"";return{id:n.id,time:Q.unix(n.timestamp).format("HH:mm:ss"),timestamp:n.timestamp,value:f,formattedValue:`$${B}`,tooltipItems:[{label:"Burned",value:`$${v.toFixed(4)}`,color:"warning.main"},...I?[{label:"Tip",value:`$${I}`,color:"info.light"}]:[],{label:"By",value:g},{label:"Block",value:o,color:"text.secondary"},{label:"Tx Count",value:n.txCount}]}});x.sort((o,n)=>o.timestamp-n.timestamp);const S=x.reduce((o,n)=>o+n.value,0),E=x.length>0?S/x.length:0;return{chartData:x,maxBurnedUSD:c,totalTransactions:t.length,averageBurnedUSD:E}},[t,s]);return e.jsx(e.Fragment,{children:t.length===0?e.jsx(r,{display:"flex",justifyContent:"center",p:4,children:e.jsx(me,{color:"secondary"})}):e.jsx(ge,{chartData:j,maxValue:h,totalTransactions:p,chartTitle:"Recent Jackpots",averageValue:l,hideTotalTransactions:!0})})},Qe=({summary:t,getUSDValue:s})=>{const A=G();return e.jsx(_e,{sx:{mb:4,background:"linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%)",border:`1px solid ${A.palette.divider}`,color:"white",boxShadow:6},children:e.jsxs(We,{children:[e.jsx(m,{variant:"h6",gutterBottom:!0,sx:{opacity:.7,fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"1px"}}),e.jsxs(K,{container:!0,spacing:3,children:[e.jsx(K,{size:{xs:12,md:4},children:e.jsxs(r,{display:"flex",alignItems:"center",children:[e.jsx(Te,{sx:{mr:2,fontSize:48,opacity:.9,color:A.palette.warning.main}}),e.jsxs(r,{children:[e.jsx(m,{variant:"caption",display:"block",sx:{opacity:.7},children:"LOCK Burned (USD)"}),e.jsxs(m,{variant:"h4",fontWeight:"bold",children:["$",s(t.totalBurned)]})]})]})}),e.jsx(K,{size:{xs:12,md:4},children:e.jsxs(r,{display:"flex",alignItems:"center",children:[e.jsx(Re,{sx:{mr:2,fontSize:48,opacity:.9,color:A.palette.success.main}}),e.jsxs(r,{children:[e.jsx(m,{variant:"caption",display:"block",sx:{opacity:.7},children:"Jackpot Wins (USD)"}),e.jsxs(m,{variant:"h4",fontWeight:"bold",children:["$",s(t.totalJackpot)]})]})]})}),e.jsx(K,{size:{xs:12,md:4},children:e.jsxs(r,{display:"flex",alignItems:"center",children:[e.jsx(He,{sx:{mr:2,fontSize:48,opacity:.9,color:A.palette.info.main}}),e.jsxs(r,{children:[e.jsx(m,{variant:"caption",display:"block",sx:{opacity:.7},children:"Tips Paid (USD)"}),e.jsxs(m,{variant:"h4",fontWeight:"bold",children:["$",s(t.totalTip)]})]})]})})]})]})})},Ve=({logs:t,balances:s,truncateAddress:A})=>{const j=G(),h=y.useMemo(()=>{if(!t||t.length===0||!s)return[];const p={};return t.forEach(l=>{const c=l.args.caller,C=l.args.jackpotAmount;C!==0n&&(p[c]||(p[c]={address:c,totalJackpot:0n,wins:0}),p[c].totalJackpot=p[c].totalJackpot+C,p[c].wins+=1)}),Object.values(p).map(l=>{const c=parseFloat(D({value:l.totalJackpot,inputToken:b.Mintable,outputToken:b.USDC,balances:s,round:4,removeCommas:!0}));return{...l,usdValue:c}}).sort((l,c)=>c.usdValue-l.usdValue).slice(0,10)},[t,s]);return h.length===0?null:e.jsxs(r,{mt:4,mb:4,children:[e.jsxs(r,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(ee,{sx:{color:j.palette.warning.main,mr:1,fontSize:28}}),e.jsx(m,{variant:"h5",fontWeight:"bold",color:"textPrimary",children:"Jackpot Leaderboard"})]}),e.jsx(ke,{component:ie,sx:{borderRadius:2,overflow:"hidden",boxShadow:j.shadows[3]},children:e.jsxs(ve,{size:"small",children:[e.jsx(Ce,{sx:{bgcolor:j.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)"},children:e.jsxs(ce,{children:[e.jsx(R,{children:"Rank"}),e.jsx(R,{children:"Address"}),e.jsx(R,{align:"right",children:"Wins"}),e.jsx(R,{align:"right",children:"Total Won (USD)"})]})}),e.jsx(ye,{children:h.map((p,l)=>e.jsxs(ce,{hover:!0,children:[e.jsx(R,{children:e.jsxs(m,{fontWeight:"bold",color:l<3?"primary":"textSecondary",children:["#",l+1]})}),e.jsxs(R,{children:[A(p.address),l===0&&e.jsx(ee,{sx:{fontSize:16,color:"#FFD700",ml:1,verticalAlign:"middle"}}),l===1&&e.jsx(ee,{sx:{fontSize:16,color:"#C0C0C0",ml:1,verticalAlign:"middle"}}),l===2&&e.jsx(ee,{sx:{fontSize:16,color:"#CD7F32",ml:1,verticalAlign:"middle"}})]}),e.jsx(R,{align:"right",children:p.wins}),e.jsx(R,{align:"right",children:e.jsxs(m,{fontWeight:"bold",color:"success.main",children:["$",p.usdValue.toFixed(4)]})})]},p.address))})]})})]})};var P=(t=>(t.PERCENT_90="PERCENT_90",t.PERCENT_80="PERCENT_80",t.PERCENT_50="PERCENT_50",t.PERCENT_25="PERCENT_25",t.PERCENT_10="PERCENT_10",t.MANUAL_0_01="MANUAL_0_01",t.MANUAL_0_05="MANUAL_0_05",t.MANUAL_0_10="MANUAL_0_10",t))(P||{});const Ge=({avgGemValue:t,minGemValue:s,selectedFilter:A,onFilterChange:j,sortedMarketAddresses:h,balances:p,truncateAddress:l})=>{const c=G(),[C,T]=y.useState(null);return e.jsxs(ie,{sx:{p:3,mb:4,bgcolor:"background.paper",border:`1px solid ${c.palette.divider}`},children:[e.jsxs(r,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(r,{display:"flex",alignItems:"center",children:[e.jsx(Xe,{sx:{mr:1,color:c.palette.warning.main}}),e.jsxs(m,{variant:"subtitle1",fontWeight:"bold",children:["Ready Faucets"," ",e.jsxs(m,{component:"span",variant:"subtitle1",color:"textSecondary",children:["(Average: $",t?.toFixed(4)||"0.000",")"]})]})]}),e.jsxs(r,{display:"flex",alignItems:"center",gap:1,children:[e.jsxs(m,{variant:"caption",color:"textSecondary",children:["Goal: >= $",s.toFixed(4)]}),e.jsx(Me,{size:"small",onClick:x=>T(x.currentTarget),"aria-label":"filter settings",children:e.jsx(Je,{})})]}),e.jsx(Ie,{open:!!C,anchorEl:C,onClose:()=>T(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsxs(r,{p:2,minWidth:250,children:[e.jsx(m,{variant:"subtitle2",gutterBottom:!0,fontWeight:"bold",children:"Filter Settings"}),e.jsxs(Ee,{fullWidth:!0,size:"small",children:[e.jsx(De,{id:"min-gem-filter-label",children:"Min Gem Filter"}),e.jsxs(Be,{labelId:"min-gem-filter-label",id:"min-gem-filter",value:A,label:"Min Gem Filter",onChange:x=>j(x.target.value),children:[t&&e.jsxs(H,{value:"PERCENT_90",children:["90% of Average ($",(t*.9).toFixed(4),")"]}),t&&e.jsxs(H,{value:"PERCENT_80",children:["80% of Average ($",(t*.8).toFixed(4),")"]}),t&&e.jsxs(H,{value:"PERCENT_50",children:["50% of Average ($",(t*.5).toFixed(4),")"]}),t&&e.jsxs(H,{value:"PERCENT_25",children:["25% of Average ($",(t*.25).toFixed(4),")"]}),t&&e.jsxs(H,{value:"PERCENT_10",children:["10% of Average ($",(t*.1).toFixed(4),")"]}),e.jsx(H,{value:"MANUAL_0_01",children:"$0.01 (Manual)"}),e.jsx(H,{value:"MANUAL_0_05",children:"$0.05 (Manual)"}),e.jsx(H,{value:"MANUAL_0_10",children:"$0.10 (Manual)"})]})]})]})})]}),e.jsx(r,{sx:{maxHeight:250,overflowY:"auto",pr:1},children:(()=>{const x=t||0;return h.map(S=>{if(!p)return null;const E=S.mintAmount,o=S.rewardsPercent===0?500:S.rewardsPercent,n=E+E*BigInt(o)/10000n,v=D({value:n-E,inputToken:b.Mintable,outputToken:b.USDC,balances:p,round:6,removeCommas:!0}),f=parseFloat(v)/2,B=x>0?Math.min(f/x*100,100):0,I=x>0?s/x*100:0,k=f>=s;return e.jsxs(r,{mb:1,display:"flex",alignItems:"center",children:[e.jsx(m,{variant:"caption",sx:{width:80,fontFamily:"monospace"},children:l(S.currentAddress)}),e.jsxs(r,{sx:{flexGrow:1,mx:1,position:"relative"},children:[e.jsx(Ne,{variant:"determinate",value:B,sx:{height:10,borderRadius:5,backgroundColor:c.palette.grey[800],"& .MuiLinearProgress-bar":{backgroundColor:k?"#FFD700":c.palette.secondary.main}}}),x>0&&e.jsx(xe,{title:`Goal: $${s.toFixed(4)}`,children:e.jsx(r,{sx:{position:"absolute",left:`${Math.min(I,100)}%`,top:-2,bottom:-2,width:"2px",bgcolor:"warning.main",zIndex:1,boxShadow:"0 0 4px rgba(0,0,0,0.5)"}})}),k&&e.jsx(Ye,{sx:{position:"absolute",left:`${B}%`,top:-12,fontSize:16,color:"#FFD700",transform:"translateX(-50%)"}})]}),e.jsxs(m,{variant:"caption",sx:{width:60,textAlign:"right"},children:["$",f.toFixed(4)]})]},S.currentAddress)})})()})]})},Ke=({ecosystem:t,avgGemValue:s,truncateAddress:A})=>{const j=G(),{balances:h,games:p,selectedAddress:l}=ne(le(i=>({balances:i.balances,games:i.games,selectedAddress:i.selectedAddress}))),c=Z.HodlClicker,{marketAddresses:C,totalContractRewardsAmount:T,totalContractLockedAmount:x}=p[c],S=C&&C.addresses.length>0&&C.addresses.find(i=>i.currentAddress.toLowerCase()===l?.toLowerCase())||null,E=()=>{if(!S||!h||!T||!x)return null;const i=()=>x?new de(S.rewardsAmount.toString()).div(new de(x.toString())).toNumber()*100:0;if(x===0n||S.rewardsAmount===0n)return e.jsx(e.Fragment,{});const d=i(),N=()=>d>20?{tier:7,emoji:e.jsx(e.Fragment,{children:"ðŸ‘€"})}:d>10?{tier:6,emoji:e.jsx(e.Fragment,{children:"ðŸ‘‘"})}:d>5?{tier:5,emoji:e.jsx(e.Fragment,{children:"ðŸ’Ž"})}:d>2?{tier:4,emoji:e.jsx(e.Fragment,{children:"ðŸ…"})}:d>1?{tier:3,emoji:e.jsx(e.Fragment,{children:"ðŸ¥ˆ"})}:d>.5?{tier:2,emoji:e.jsx(e.Fragment,{children:"ðŸ¥‰"})}:{tier:1},{emoji:F,tier:M}=N();return e.jsxs(Le,{severity:"success",sx:{mt:2},children:["[Tier ",M,"] Passive Staking:"," ",e.jsx(m,{variant:"body2",display:"inline",color:"textSecondary",children:e.jsxs("strong",{children:["Earning ",d.toFixed(4),"% of all rewards collected ",F]})})]})},o=()=>{$({type:J.commands.Dialog.Show,payload:{dialog:Ue.MarketDepositWithdraw}})},[n,v]=y.useState(()=>localStorage.getItem("hodlClickerGemFilter")||P.PERCENT_50),[f,B]=y.useState(.05);y.useEffect(()=>{localStorage.setItem("hodlClickerGemFilter",n)},[n]),y.useEffect(()=>{if(s===null)return;let i=.05;switch(n){case P.PERCENT_90:i=s*.9;break;case P.PERCENT_80:i=s*.8;break;case P.PERCENT_50:i=s*.5;break;case P.PERCENT_25:i=s*.25;break;case P.PERCENT_10:i=s*.1;break;case P.MANUAL_0_01:i=.01;break;case P.MANUAL_0_05:i=.05;break;case P.MANUAL_0_10:i=.1;break}B(i)},[n,s]);const I=Ae.useRef(!1);y.useEffect(()=>{$({type:J.commands.Market.UpdateGame,payload:{game:Z.HodlClicker}});const i=p[Z.HodlClicker];(!i||!i.marketAddresses)&&!I.current&&(I.current=!0,$({type:J.commands.Market.RefreshMarketAddresses,payload:{game:Z.HodlClicker}}))},[p]);const k=y.useMemo(()=>{const i=p[Z.HodlClicker];if(!i||!i.marketAddresses)return[];const d=[],F=V(t).gameHodlClickerAddress;return i.marketAddresses.addresses.forEach(M=>{if(M.isPaused||M.minterAddress.toLowerCase()!==F?.toLowerCase()||!h)return;const U=M.mintAmount,O=M.rewardsPercent===0?500:M.rewardsPercent,q=U+U*BigInt(O)/10000n,Y=D({value:q-U,inputToken:b.Mintable,outputToken:b.USDC,balances:h,round:6,removeCommas:!0}),W=parseFloat(Y)/2;d.push({id:M.currentAddress,ethereumAddress:M.currentAddress,dollarAmount:W,error:void 0})}),d},[p,h]),g=y.useMemo(()=>k.filter(i=>i.dollarAmount>=f),[k,f]),L=y.useMemo(()=>g.reduce((i,d)=>i+d.dollarAmount,0),[g]),_=()=>{g.length!==0&&$({type:J.commands.Market.MarketBurnFluxTokens,payload:{amountToBurn:0n,gems:g}})},z=y.useMemo(()=>{if(!C?.addresses||!h)return[];const d=V(t).gameHodlClickerAddress;return[...C.addresses.filter(F=>!(F.isPaused||F.minterAddress.toLowerCase()!==d?.toLowerCase()))].sort((F,M)=>{const U=X=>{const se=X.mintAmount,fe=X.rewardsPercent===0?500:X.rewardsPercent,be=se+se*BigInt(fe)/10000n,je=D({value:be-se,inputToken:b.Mintable,outputToken:b.USDC,balances:h,round:6,removeCommas:!0});return parseFloat(je)/4},O=U(F),q=U(M),Y=O>=f,W=q>=f;return Y&&!W?-1:!Y&&W?1:q-O})},[C,h,f,t]),[w,a]=y.useState(null);y.useEffect(()=>{(async()=>{if(g.length===0||!l||!h){a(null);return}try{const d=he(),F=V(t).gameHodlClickerAddress;if(!d||!F)return;let M=0n;const U=0n;if(g.length===1){const W=g[0];M=await d.estimateContractGas({address:F,abi:re,functionName:"burnTokens",args:[U,W.ethereumAddress],account:l})}else{const W=g.map(X=>({amountToBurn:U,burnToAddress:X.ethereumAddress}));M=await d.estimateContractGas({address:F,abi:re,functionName:"burnTokensFromAddresses",args:[W],account:l})}const O=await d.getGasPrice(),q=M*O,Y=D({value:q,inputToken:b.ETH,outputToken:b.USDC,balances:h,round:4,removeCommas:!0});a(Y)}catch(d){console.error("Error estimating gas:",d),a(null)}})()},[g,l,h,t]);const u=y.useMemo(()=>w?parseFloat(w)>L:!1,[w,L]);return e.jsxs(r,{children:[e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[pe({ecosystem:t,connectionMethod:ne.getState().connectionMethod,dispatch:$,width:300}),e.jsxs(r,{display:"flex",alignItems:"center",gap:2,children:[e.jsxs(r,{textAlign:"right",children:[e.jsx(m,{variant:"caption",display:"block",color:"textSecondary",children:"Your Staked Balance"}),e.jsx(m,{variant:"h6",fontWeight:"bold",color:"textPrimary",children:S&&h?"$"+D({value:S.rewardsAmount,inputToken:b.Mintable,outputToken:b.USDC,balances:h,round:4}):"$0.00"})]}),e.jsx(te,{variant:"outlined",color:"secondary",startIcon:e.jsx(Fe,{}),onClick:o,size:"small",children:"Stake / Unstake"})]})]}),E(),e.jsxs(r,{mt:4,mb:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(te,{variant:"contained",size:"large",startIcon:e.jsx(qe,{sx:{fontSize:28,color:g.length>0?"#009688":"inherit"}}),onClick:_,disabled:g.length===0,sx:{px:6,py:2,fontSize:"1.2rem",fontWeight:"bold",borderRadius:3,background:g.length>0?"linear-gradient(45deg, #FFD700 30%, #FF8C00 90%)":j.palette.action.disabledBackground,color:g.length>0?"#000":j.palette.text.disabled,boxShadow:g.length>0?"0 3px 5px 2px rgba(255, 105, 135, .3)":"none",backfaceVisibility:"hidden",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",willChange:"transform",animation:g.length>0?"pulse 2s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(1) translateZ(0)",boxShadow:"0 0 0 0 rgba(255, 165, 0, 0.7)"},"70%":{transform:"scale(1.05) translateZ(0)",boxShadow:"0 0 0 20px rgba(255, 165, 0, 0)"},"100%":{transform:"scale(1) translateZ(0)",boxShadow:"0 0 0 0 rgba(255, 165, 0, 0)"}},transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 0 30px rgba(255, 140, 0, 0.8)"}},children:g.length>0?`Collect $${L.toFixed(4)}`:"Waiting..."}),w?e.jsxs(m,{variant:"caption",sx:{mt:1,color:u?"error.main":"success.main",fontWeight:"bold"},children:["Gas Estimate: ~$",w]}):e.jsx(m,{variant:"caption",color:"textSecondary",sx:{mt:1},children:"Waiting for Faucets to Fill..."})]}),e.jsx(Ge,{avgGemValue:s,minGemValue:f,selectedFilter:n,onFilterChange:v,sortedMarketAddresses:z,balances:h,truncateAddress:A})]})},et=({ecosystem:t})=>{const[s,A]=y.useState([]),{balances:j}=ne(le(o=>({balances:o.balances})));y.useEffect(()=>{const o=he(),v=V(t).gameHodlClickerAddress;if(!o||!v)return;const f=async(k,g=!1)=>{const L=["TokensBurned"],_=k.filter(a=>L.includes(a.eventName)).map(async a=>{const u=typeof a.logIndex=="bigint"?Number(a.logIndex):a.logIndex||0;let i=Math.floor(Date.now()/1e3);if(g)try{const d=await o.getBlock({blockNumber:a.blockNumber});i=Number(d.timestamp)}catch(d){console.error("Error fetching block timestamp",d)}return{id:`${a.transactionHash}-${u}`,eventName:a.eventName,args:a.args,blockNumber:a.blockNumber.toString(),transactionHash:a.transactionHash,logIndex:u,timestamp:i}}),z=await Promise.all(_);if(z.length===0)return;const w=Array.from(new Map(z.map(a=>[a.id,a])).values());A(a=>{const u=w.filter(d=>!a.some(N=>N.id===d.id));return u.length===0?a:[...u,...a].sort((d,N)=>BigInt(d.blockNumber)!==BigInt(N.blockNumber)?BigInt(N.blockNumber)>BigInt(d.blockNumber)?1:-1:N.logIndex-d.logIndex).slice(0,500)})};(async()=>{try{const k=await o.getBlockNumber();let g=[];const L=100,z=t===oe.Flux?10000n:100000n;let w=k,a=0;const u=5;for(;g.length<L&&a<u&&w>0n;){const i=w-z>0n?w-z:0n;g=[...await o.getContractEvents({address:v,abi:re,eventName:"TokensBurned",fromBlock:i,toBlock:w}),...g],w=i-1n,a++}f(g,!0)}catch(k){console.error("Failed to fetch past events:",k)}})();const I=o.watchContractEvent({address:v,abi:re,eventName:"TokensBurned",onLogs:k=>f(k,!1)});return()=>{I()}},[t]);const[h,p]=y.useState(null);y.useEffect(()=>{if(s.length>0&&j){const o=s.slice(0,50),v=o.reduce((f,B)=>{const I=B.args.jackpotAmount,k=parseFloat(D({value:I,inputToken:b.Mintable,outputToken:b.USDC,balances:j,round:6,removeCommas:!0}));return f+k},0)/o.length;p(v)}},[s,j]);const{summary:l,chartData:c,maxBurnedUSD:C,totalTransactions:T,chartTitle:x}=y.useMemo(()=>{const o=Math.floor(Date.now()/1e3),n=o-24*3600,v=s.filter(a=>a.timestamp>=n),f=v.reduce((a,u)=>a+u.args.amountActuallyBurned,0n),B=v.reduce((a,u)=>a+u.args.jackpotAmount,0n),I=v.reduce((a,u)=>a+u.args.totalTipAmount,0n),k={};v.forEach(a=>{const u=Q.unix(a.timestamp).startOf("hour").unix();k[u]||(k[u]={burnedUSD:0,txCount:0});const i=a.args.amountActuallyBurned;let d=0;if(j){const N=D({value:i,inputToken:b.Mintable,outputToken:b.USDC,balances:j,round:2,removeCommas:!0});d=parseFloat(N)}k[u].burnedUSD+=d,k[u].txCount+=1});let g=0;const L=Object.entries(k).map(([a,u])=>(u.burnedUSD>g&&(g=u.burnedUSD),{time:Q.unix(Number(a)).format("HH:mm"),timestamp:Number(a),value:u.burnedUSD,formattedValue:`$${u.burnedUSD.toFixed(2)}`,tooltipItems:[{label:"Tx Count",value:u.txCount}]})).sort((a,u)=>a.timestamp-u.timestamp),_=Q.unix(n).format("MMM D, h:mm A"),z=Q.unix(o).format("MMM D, h:mm A");let w="Collect History (Last 24h)";if(s.length>0&&v.length>0){const a=Math.min(...v.map(i=>i.timestamp)),u=Math.ceil((o-a)/3600);u<24&&u>0&&(w=`Collect History (Last ${u} hour${u!==1?"s":""})`)}return{summary:{totalBurned:f,totalJackpot:B,totalTip:I},chartData:L,maxBurnedUSD:g,totalTransactions:v.length,dateRange:`${_} - ${z}`,chartTitle:w}},[s,j]),S=(o,n=2)=>j?D({value:o,inputToken:b.Mintable,outputToken:b.USDC,balances:j,round:n}):"0.00",E=o=>o?`${o.substring(0,12)}...${o.substring(o.length-12)}`:"";return e.jsxs(r,{children:[e.jsx(Ke,{ecosystem:t,avgGemValue:h,truncateAddress:E}),e.jsx(Qe,{summary:l,getUSDValue:S}),e.jsx(Ve,{logs:s,balances:j,truncateAddress:E}),e.jsx(ge,{chartData:c,maxValue:C,totalTransactions:T,chartTitle:x}),e.jsx(r,{mb:6,children:e.jsx(Ze,{logs:s,balances:j,truncateAddress:E})})]})},tt=Pe.create(()=>({fullScreenSplash:{display:"block",alignContent:"center",justifyContent:"center"}})),jt=()=>{const{classes:t}=tt(),{isInitialized:s,hasWeb3:A,selectedAddress:j,isIncorrectNetwork:h,connectionMethod:p,ecosystem:l}=ne(le(n=>({isInitialized:n.isInitialized,hasWeb3:n.hasWeb3,selectedAddress:n.selectedAddress,isIncorrectNetwork:n.isIncorrectNetwork,connectionMethod:n.connectionMethod,ecosystem:n.ecosystem}))),c=V(l),{ecosystemName:C}=c;y.useEffect(()=>{$({type:J.commands.Web3.Initialize,payload:{address:null}})},[]);const T=()=>{if(h){const n=c.isArbitrumOnlyToken?"Arbitrum":"Ethereum Mainnet & Arbitrum";return x({title:`Looks like you are not on ${n} Network...`,message:e.jsxs(e.Fragment,{children:["Currently ",C," Dashboard only works on ",n,". Please change your network provider to"," ",e.jsxs(r,{fontWeight:"bold",display:"inline",children:[n," L2"]})]}),content:e.jsx("img",{src:"./images/network2.png",alt:"Network Error"})})}return s&&A!==null?null:e.jsx(r,{alignItems:"center",justifyContent:"center",display:"flex",style:{height:"100vh"},children:e.jsx(me,{color:"secondary"})})},x=({title:n,message:v,content:f})=>e.jsx(r,{className:t.fullScreenSplash,children:e.jsxs(r,{mt:14,mb:6,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",children:[e.jsxs(r,{mt:3,mb:6,textAlign:"center",children:[e.jsx(m,{component:"div",variant:"h5",color:"textPrimary",gutterBottom:!0,children:n}),e.jsx(m,{component:"div",color:"textSecondary",children:v})]}),f]})}),S=()=>{const n=()=>{const f=window.ethereum;return!(!f||!f.isMetaMask)},v=()=>n()?e.jsx(r,{mr:1,display:"inline",children:e.jsx("img",{src:$e,alt:"Metamask",width:"24",height:"24",style:{verticalAlign:"middle"}})}):null;return e.jsx(r,{className:t.fullScreenSplash,children:e.jsxs(r,{mt:14,mb:6,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",children:[e.jsxs(r,{mt:3,mb:6,textAlign:"center",children:[e.jsxs(m,{component:"div",variant:"h5",color:"textPrimary",gutterBottom:!0,children:["Welcome to ",C," Machine"]}),e.jsx(m,{component:"div",color:"textSecondary",children:"Connect to the network to view the machine status."})]}),e.jsx(r,{children:e.jsx(r,{display:"inline-block",mr:3,children:e.jsxs(te,{variant:"outlined",color:"secondary",size:"large",onClick:()=>$({type:J.commands.Web3.ConnectToWallet}),children:[v(),"Enter Network"]})})})]})})},E=()=>e.jsx(r,{mb:4,display:"flex",justifyContent:"center",children:pe({ecosystem:l,connectionMethod:p,dispatch:$,width:300})}),o=()=>!s||A===null?null:!A||!j?e.jsxs(e.Fragment,{children:[E(),S()]}):l!==oe.Lockquidity?e.jsx(r,{className:t.fullScreenSplash,children:e.jsxs(r,{mt:14,mb:6,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",children:[e.jsxs(r,{mt:3,mb:6,textAlign:"center",children:[e.jsx(m,{component:"div",variant:"h2",color:"textPrimary",gutterBottom:!0,style:{fontWeight:"bold"},children:"One more step..."}),e.jsxs(m,{component:"div",variant:"h6",color:"textSecondary",children:["HODL Clicker game runs on the Arbitrum ecosystem.",e.jsx("br",{}),"You will need to switch to the right network to play."]})]}),e.jsx(r,{mb:4,display:"flex",justifyContent:"center",children:e.jsx(te,{variant:"outlined",color:"secondary",size:"large",startIcon:e.jsx(we,{}),style:{borderRadius:50,padding:"10px 30px",fontSize:"1.2rem"},onClick:async()=>{const n=oe.Lockquidity;await ze(n,p,"0xa4b1"),localStorage.setItem("targetEcosystem",n),$({type:J.commands.Web3.Reinitialize,payload:{targetEcosystem:n}})},children:"Switch To Arbitum (L2)"})})]})}):e.jsx(r,{className:t.fullScreenSplash,children:e.jsx(r,{mt:11,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",children:e.jsx(r,{width:"100%",maxWidth:800,children:e.jsx(et,{ecosystem:l})})})});return e.jsxs(e.Fragment,{children:[e.jsxs(Se,{children:[T(),o()]}),e.jsx(Oe,{ecosystem:l})]})};export{jt as default};
